!function(t){t.address=function(){var e,n,r,i=function(e){var n=t.extend(t.Event(e),function(){for(var e={},n=t.address.parameterNames(),r=0,i=n.length;r<i;r++)e[n[r]]=t.address.parameter(n[r]);return{value:t.address.value(),path:t.address.path(),pathNames:t.address.pathNames(),parameterNames:n,parameters:e,queryString:t.address.queryString()}}.call(t.address));return t(t.address).trigger(n),n},a=function(t){return Array.prototype.slice.call(t)},o=function(e,n,r){return t().bind.apply(t(t.address),Array.prototype.slice.call(arguments)),t.address},s=function(e,n){return t().unbind.apply(t(t.address),Array.prototype.slice.call(arguments)),t.address},c=function(){return q.pushState&&void 0!==j.state},d=function(){return("/"+F.pathname.replace(new RegExp(j.state),"")+F.search+(u()?"#"+u():"")).replace(W,"/")},u=function(){var t=F.href.indexOf("#");return-1!=t?F.href.substr(t+1):""},l=function(){return c()?d():u()},p=function(){try{return void 0!==top.document&&void 0!==top.document.title&&void 0!==top.jQuery&&void 0!==top.jQuery.address&&!1!==top.jQuery.address.frames()?top:window}catch(t){return window}},f=function(t){return t=t.toString(),(j.strict&&"/"!=t.substr(0,1)?"/":"")+t},h=function(t,e){return parseInt(t.css(e),10)},v=function(){if(!J){var t=l();decodeURI(X)!=decodeURI(t)&&(O&&T<7?F.reload():(O&&!B&&j.history&&M(y,50),X=t,g(E)))}},g=function(t){return M(m,10),i(R).isDefaultPrevented()||i(t?S:I).isDefaultPrevented()},m=function(){if("null"!==j.tracker&&j.tracker!==C){var e=t.isFunction(j.tracker)?j.tracker:P[j.tracker],n=(F.pathname+F.search+(t.address&&!c()?t.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");t.isFunction(e)?e(n):(t.isFunction(P.urchinTracker)&&P.urchinTracker(n),void 0!==P.pageTracker&&t.isFunction(P.pageTracker._trackPageview)&&P.pageTracker._trackPageview(n),void 0!==P._gaq&&t.isFunction(P._gaq.push)&&P._gaq.push(["_trackPageview",decodeURI(n)]),t.isFunction(P.ga)&&P.ga("send","pageview",n))}},y=function(){var t="javascript:"+E+";document.open();document.writeln('<html><head><title>"+N.title.replace(/\'/g,"\\'")+"</title><script>var "+$+' = "'+encodeURIComponent(l()).replace(/\'/g,"\\'")+(N.domain!=F.hostname?'";document.domain="'+N.domain:"")+"\";<\/script></head></html>');document.close();";T<7?e.src=t:e.contentWindow.location.replace(t)},w=function(){if(D&&-1!=Q){var t,e,n=D.substr(Q+1).split("&");for(t=0;t<n.length;t++)e=n[t].split("="),/^(autoUpdate|history|strict|wrap)$/.test(e[0])&&(j[e[0]]=isNaN(e[1])?/^(true|yes)$/i.test(e[1]):0!==parseInt(e[1],10)),/^(state|tracker)$/.test(e[0])&&(j[e[0]]=e[1]);D=C}X=l()},b=function(){if(!G){if(G=U,w(),t('a[rel*="address:"]').address(),j.wrap){var n=t("body");t("body > *").wrapAll('<div style="padding:'+(h(n,"marginTop")+h(n,"paddingTop"))+"px "+(h(n,"marginRight")+h(n,"paddingRight"))+"px "+(h(n,"marginBottom")+h(n,"paddingBottom"))+"px "+(h(n,"marginLeft")+h(n,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+$+'" style="height:100%;overflow:auto;position:relative;'+(L&&!window.statusbar.visible?"resize:both;":"")+'" />');t("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"}),L&&t('<style type="text/css" />').appendTo("head").text("#"+$+"::-webkit-resizer { background-color: #fff; }")}if(O&&!B){var r=N.getElementsByTagName("frameset")[0];(e=N.createElement((r?"":"i")+"frame")).src="javascript:"+E,r?(r.insertAdjacentElement("beforeEnd",e),r[r.cols?"cols":"rows"]+=",0",e.noResize=U,e.frameBorder=e.frameSpacing=0):(e.style.display="none",e.style.width=e.style.height=0,e.tabIndex=-1,N.body.insertAdjacentElement("afterBegin",e)),M((function(){t(e).bind("load",(function(){var t=e.contentWindow;(X=void 0!==t[$]?t[$]:"")!=l()&&(g(E),F.hash=X)})),void 0===e.contentWindow[$]&&y()}),50)}M((function(){i("init"),g(E)}),1),c()||(O&&T>7||!O&&B?P.addEventListener?P.addEventListener(x,v,E):P.attachEvent&&P.attachEvent("on"+x,v):_(v,50)),"state"in window.history&&t(window).trigger("popstate")}},C=null,$="jQueryAddress",x="hashchange",k="init",R="change",S="internalChange",I="externalChange",U=!0,E=!1,j={autoUpdate:U,history:U,strict:U,frames:U,wrap:E},A=(n={},(r=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}(navigator.userAgent)).browser&&(n[r.browser]=!0,n.version=r.version),n.chrome?n.webkit=!0:n.webkit&&(n.safari=!0),n),T=parseFloat(A.version),L=A.webkit||A.safari,O=A.msie,P=p(),N=P.document,q=P.history,F=P.location,_=setInterval,M=setTimeout,W=/\/{2,9}/g,z=navigator.userAgent,B="on"+x in P,D=t("script:last").attr("src"),Q=D?D.indexOf("?"):-1,K=N.title,J=E,G=E,H=U,V=E,X=l();if(O){T=parseFloat(z.substr(z.indexOf("MSIE")+4)),N.documentMode&&N.documentMode!=T&&(T=8!=N.documentMode?7:8);var Y=N.onpropertychange;N.onpropertychange=function(){Y&&Y.call(N),N.title!=K&&-1!=N.title.indexOf("#"+l())&&(N.title=K)}}if(q.navigationMode&&(q.navigationMode="compatible"),"complete"==document.readyState)var Z=setInterval((function(){t.address&&(b(),clearInterval(Z))}),50);else w(),t(b);return t(window).bind("popstate",(function(){decodeURI(X)!=decodeURI(l())&&(X=l(),g(E))})).bind("unload",(function(){P.removeEventListener?P.removeEventListener(x,v,E):P.detachEvent&&P.detachEvent("on"+x,v)})),{bind:function(t,e,n){return o.apply(this,a(arguments))},unbind:function(t,e){return s.apply(this,a(arguments))},init:function(t,e){return o.apply(this,[k].concat(a(arguments)))},change:function(t,e){return o.apply(this,[R].concat(a(arguments)))},internalChange:function(t,e){return o.apply(this,[S].concat(a(arguments)))},externalChange:function(t,e){return o.apply(this,[I].concat(a(arguments)))},baseURL:function(){var t=F.href;return-1!=t.indexOf("#")&&(t=t.substr(0,t.indexOf("#"))),/\/$/.test(t)&&(t=t.substr(0,t.length-1)),t},autoUpdate:function(t){return void 0!==t?(j.autoUpdate=t,this):j.autoUpdate},history:function(t){return void 0!==t?(j.history=t,this):j.history},state:function(t){if(void 0!==t){j.state=t;var e=d();return void 0!==j.state&&(q.pushState?"/#/"==e.substr(0,3)&&F.replace(j.state.replace(/^\/$/,"")+e.substr(2)):"/"!=e&&e.replace(/^\/#/,"")!=u()&&M((function(){F.replace(j.state.replace(/^\/$/,"")+"/#"+e)}),1)),this}return j.state},frames:function(t){return void 0!==t?(j.frames=t,P=p(),this):j.frames},strict:function(t){return void 0!==t?(j.strict=t,this):j.strict},tracker:function(t){return void 0!==t?(j.tracker=t,this):j.tracker},wrap:function(t){return void 0!==t?(j.wrap=t,this):j.wrap},update:function(){return V=U,this.value(X),V=E,this},title:function(t){return void 0!==t?(M((function(){K=N.title=t,H&&e&&e.contentWindow&&e.contentWindow.document&&(e.contentWindow.document.title=t,H=E)}),50),this):N.title},value:function(t){if(void 0!==t){if("/"==(t=f(t))&&(t=""),X==t&&!V)return;if(X=t,j.autoUpdate||V){if(g(U))return this;c()?q[j.history?"pushState":"replaceState"]({},"",j.state.replace(/\/$/,"")+(""===X?"/":X)):(J=U,L?j.history?F.hash="#"+X:F.replace("#"+X):X!=l()&&(j.history?F.hash="#"+X:F.replace("#"+X)),O&&!B&&j.history&&M(y,50),L?M((function(){J=E}),1):J=E)}return this}return f(X)},path:function(t){if(void 0!==t){var e=this.queryString(),n=this.hash();return this.value(t+(e?"?"+e:"")+(n?"#"+n:"")),this}return f(X).split("#")[0].split("?")[0]},pathNames:function(){var t=this.path(),e=t.replace(W,"/").split("/");return"/"!=t.substr(0,1)&&0!==t.length||e.splice(0,1),"/"==t.substr(t.length-1,1)&&e.splice(e.length-1,1),e},queryString:function(t){if(void 0!==t){var e=this.hash();return this.value(this.path()+(t?"?"+t:"")+(e?"#"+e:"")),this}var n=X.split("?");return n.slice(1,n.length).join("?").split("#")[0]},parameter:function(e,n,r){var i,a;if(void 0!==n){var o=this.parameterNames();for(a=[],n=void 0===n||n===C?"":n.toString(),i=0;i<o.length;i++){var s=o[i],c=this.parameter(s);"string"==typeof c&&(c=[c]),s==e&&(c=n===C||""===n?[]:r?c.concat([n]):[n]);for(var d=0;d<c.length;d++)a.push(s+"="+c[d])}return-1==t.inArray(e,o)&&n!==C&&""!==n&&a.push(e+"="+n),this.queryString(a.join("&")),this}if(n=this.queryString()){var u=[];for(a=n.split("&"),i=0;i<a.length;i++){var l=a[i].split("=");l[0]==e&&u.push(l.slice(1).join("="))}if(0!==u.length)return 1!=u.length?u:u[0]}},parameterNames:function(){var e=this.queryString(),n=[];if(e&&-1!=e.indexOf("="))for(var r=e.split("&"),i=0;i<r.length;i++){var a=r[i].split("=")[0];-1==t.inArray(a,n)&&n.push(a)}return n},hash:function(t){if(void 0!==t)return this.value(X.split("#")[0]+(t?"#"+t:"")),this;var e=X.split("#");return e.slice(1,e.length).join("#")}}}(),t.fn.address=function(e){return t(this).each((function(n){t(this).data("address")||t(this).on("click",(function(n){if(n.shiftKey||n.ctrlKey||n.metaKey||2==n.which)return!0;var r=n.currentTarget;if(t(r).is("a")){n.preventDefault();var i=e?e.call(r):/address:/.test(t(r).attr("rel"))?t(r).attr("rel").split("address:")[1].split(" ")[0]:void 0===t.address.state()||/^\/?$/.test(t.address.state())?t(r).attr("href").replace(/^(#\!?|\.)/,""):t(r).attr("href").replace(new RegExp("^(.*"+t.address.state()+"|\\.)"),"");t.address.value(i)}})).on("submit",(function(n){var r=n.currentTarget;if(t(r).is("form")){n.preventDefault();var i=t(r).attr("action"),a=e?e.call(r):(-1!=i.indexOf("?")?i.replace(/&$/,""):i+"?")+t(r).serialize();t.address.value(a)}})).data("address",!0)})),this}}(jQuery);var getParams=function(t){var e={},n=document.createElement("a");n.href=t||window.location.href;var r=n.search.substring(1).split("&");if(r.length<1)return e;for(var i=0;i<r.length;i++){var a=r[i].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e},geolocate=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){$.get("https://api.postcodes.io/postcodes?lon="+t.coords.longitude+"&lat="+t.coords.latitude,(function(t){!t.result||t.result.length<1?(alert("Sorry we can't find you, please type in your postcode."),$("#findConsituency").removeAttr("disabled"),$("#findConsituency").focus()):getResults("p:"+t.result[0].postcode)}))}),(function(){alert("Sorry we can't find you, please type in your postcode."),$("#findConsituency").removeAttr("disabled"),$("#findConsituency").focus()})):(alert("Sorry we can't find you, please type in your postcode."),$("#findConsituency").focus())},getResults=function(t){$("#findConsituency").val(t.substring(2)),$("#findConsituency").attr("disabled","disabled"),"p:"==t.substring(0,2)?$.ajax({url:"https://api.postcodes.io/postcodes/"+encodeURIComponent(t.substring(2))}).done((function(e){$("#findConsituency").removeAttr("disabled"),window.location.href="./"+e.result.parliamentary_constituency.replace(/[ ,.]/g,"").toLowerCase()+".html#"+encodeURIComponent(t.substring(2))})):window.location.href="./"+t.substring(2).replace(/[ ,.]/g,"").toLowerCase()+".html"},getPostcode=function(){var t=window.location.href,e=getParams(t).postcode;e&&($("#findConsituency").attr("disabled","disabled"),$.ajax({url:"https://api.postcodes.io/postcodes/"+encodeURIComponent(e)}).done((function(t){$("#findConsituency").removeAttr("disabled"),window.location.href="./"+t.result.parliamentary_constituency.replace(/[ ,.]/g,"").toLowerCase()+".html#"+encodeURIComponent(e)})))};$("#findConsituency").autocomplete({lookup:function(t,e){var n=[];$.getJSON("./data/constituencies.json",(function(e){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];i.name.toLowerCase().indexOf(t.toLowerCase())>-1&&n.push({value:i.name,data:"a:"+i.name})}})),$.ajax({url:"https://api.postcodes.io/postcodes/"+encodeURIComponent(t)+"/autocomplete"}).done((function(t){var r=5;if(t.result)for(t.result.length<5&&(r=t.result.length),i=0;i<r;i++)n.push({value:t.result[i],data:"p:"+t.result[i]});topPostcode=n[0],n=n.slice(0,5),e({suggestions:n})}))},onSelect:function(t){getResults(t.data)}}),$("#findConsituency").click((function(){$("#findConsituency").autocomplete("clear"),$("#findConsituency").val(""),setTimeout("$('#findConsituency').focus()",200)})),setTimeout("$('#findConsituency').focus()",500),$("#findMe").click((function(t){t.preventDefault(),geolocate()})),getPostcode();